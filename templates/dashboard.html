<!DOCTYPE html>
<html>
<head>
    <title>BAEAI Dashboard</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/dashboard.css') }}">
</head>
<body>
    <!-- Header and Menu Bar Container -->
    <div id="header-menu-container">
        <h1>GPTBA</h1>
        <ul>
            <li><a href="{{ url_for('dashboard') }}">Dashboard</a></li>
            <li><a href="{{ url_for('soagile_workflow') }}">SoAgile Workflow</a></li>
            <li><a href="{{ url_for('kpis') }}">KPIs</a></li>
            <li><a href="{{ url_for('resources') }}">Resources</a></li>
            <li><a href="{{ url_for('about') }}">About</a></li>
        </ul>
    </div>

    <!-- Main Container -->
    <div id="main-container">
        <!-- Features Container -->
        <div id="features-container">
            <button id="add-stakeholder-button">Add Stakeholder</button>
            <button><a href="{{ url_for('add_stakeholder') }}">Project</a></button>
        </div>

        <!-- Option Box Container -->
        <div id="optionbox-container">
            <!-- Add any content related to options here -->
        </div>

        <div id="form-container">
            <!-- Your form goes here -->
        </div>
        

      <!-- Chatbox Container -->
    <div id="chatbox-container">
    <!-- GPT Text Display Container -->
        <div id="gpt-text-display-container">
        <!-- The text generated by GPT will be inserted here -->
            <p>{{ output }}</p>
        </div>

<!-- User Text Input Container -->
<div id="user-text-input-container">
    <form action="{{ url_for('process_input') }}" method="post">
        <div id="input-button-container">
            <textarea id="user-input" name="user-input" rows="5" cols="110"></textarea>
            <button type="submit">Submit</button>
        </div>
    </form>
</div>



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
    $(document).ready(function(){
        $("#add-stakeholder-button").click(function(){
            // Load the form into the options container
            $("#optionbox-container").load("{{ url_for('add_stakeholder') }}");
        });

        // Handle form submission
        $("#optionbox-container").on("submit", "#add-stakeholder-form", function(e){
            e.preventDefault();

            // Submit the form via AJAX
            $.ajax({
                url: "{{ url_for('add_stakeholder') }}",
                type: "post",
                data: $(this).serialize(),
                success: function(){
                    alert("Added successfully!");
                }
            });
        });
    });


    $(document).ready(function(){
    // Other code...

    // Handle textarea resizing
    var textarea = document.getElementById('user-input');
    textarea.addEventListener('input', function () {
        var lines = this.value.split('\n');
        if (lines.length <= 30) {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        }
    });
});

function updateOutput() {
    $.get("/get_output", function(data) {
        $("#gpt-text-display-container").text(data);
    });
}

$(document).ready(function(){
    updateOutput();
    // Other code...
});

    </script>

</body>
</html>
